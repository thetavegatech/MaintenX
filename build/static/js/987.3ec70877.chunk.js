"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[987],{73144:function(e,t,n){n.r(t);var a=n(4942),r=n(15671),i=n(43144),s=n(60136),o=n(27277),l=n(72791),c=n(61604),d=n(34045),h=n(78983),x=n(55294),u=n(11087),p=n(56355),g=(n(8477),n(18512)),m=(n(66338),n(80184)),y=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={breakdowns:[],selectedLocation:"",searchLocation:"",message:"",searchQuery:"",isHovered:!1,startDate:"",endDate:"",loading:!0},e.handleMouseEnter=function(){e.setState({isHovered:!0})},e.handleMouseLeave=function(){e.setState({isHovered:!1})},e.handleSearchChange=function(t){var n=t.target.value.toLowerCase(),a=e.state.breakdowns.filter((function(t){var a=(t.Location||"").toLowerCase(),r=!e.state.startDate||t.BreakdownStartDate&&t.BreakdownStartDate>=e.state.startDate,i=!e.state.endDate||t.BreakdownStartDate&&t.BreakdownStartDate<=e.state.endDate;return a.includes(n)&&r&&i}));e.setState({filteredAssets:a,searchQuery:n})},e.handleDateChange=function(t,n){e.setState((0,a.Z)({},t,n))},e.handleLocationChange=function(t){e.setState({selectedLocation:t.target.value})},e.exportToExcel=function(){var t=e.state.filteredAssets;if(t&&t.length>0){var n=t.map((function(e){return{Date:(0,c.Z)(new Date(e.BreakdownStartDate),"HH:mm:ss dd-MM-yyyy"),MachineName:e.MachineName,BreakdownStartDate:e.BreakdownStartDate,BreakdownType:e.BreakdownType,BreakdownEndDate:e.BreakdownEndDate,Shift:e.Shift,Operations:e.Operations,BreakdownPhenomenons:e.BreakdownPhenomenons,WhyWhyAnalysis:e.WhyWhyAnalysis,RootCause:e.RootCause,PreventiveAction:e.PreventiveAction,CorrectiveAction:e.CorrectiveAction,TargetDate:e.TargetDate,Responsibility:e.Responsibility,AttendedBy:e.AttendedBy,Status:e.Status,SpareParts:e.SpareParts,Cost:e.Cost,Location:e.Location,LineName:e.LineName,Remark:e.Remark}})),a=d.P6.json_to_sheet(n),r=d.P6.book_new();d.P6.book_append_sheet(r,a,"ReportData"),d.NC(r,"reportdata.xlsx")}},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.selectedLocation;t&&"https://backendmaintenx.onrender.com/api/breakdown?location=".concat(t);x.Z.get("https://backendmaintenx.onrender.com/api/breakdown").then((function(t){e.setState({breakdowns:Array.isArray(t.data)?t.data:[t.data],loading:!1})})).catch((function(e){console.error("Error fetching data:",e),alert("Error fetching data")}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.breakdowns,a=t.filteredAssets,r=(t.searchLocation,t.searchQuery,t.loading),i=n.filter((function(e){return"pending"===e.Status})),s=n.filter((function(e){return e.Location&&""!==e.Location.trim()})),o=this.state.isHovered;return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"container",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)(u.OL,{to:"/breakdownForm",children:[" ",(0,m.jsx)(h.u5,{className:"mb-2",style:{marginTop:"5px",backgroundColor:"#000026"},children:"Add New"})]}),(0,m.jsx)(h.u5,{type:"button",style:{margin:"1rem",backgroundColor:"#000026"},onClick:this.exportToExcel,children:"Export to Excel"}),(0,m.jsx)("label",{htmlFor:"startDate",style:{marginRight:"0.2rem",fontSize:"16px",fontWeight:"bold",whiteSpace:"nowrap","@media (max-width: 750px)":{fontSize:"14px"}},children:"From Date:"}),(0,m.jsx)("input",{type:"date",id:"startDate",value:this.state.startDate,onChange:function(t){return e.handleDateChange("startDate",t.target.value)},style:{padding:"6px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"10px",marginLeft:"10px",fontSize:"14px"}}),(0,m.jsx)("label",{htmlFor:"endDate",style:{marginRight:"30px",fontSize:"16px",fontWeight:"bold",whiteSpace:"nowrap"},children:"To Date:"}),(0,m.jsx)("input",{type:"date",id:"endDate",value:this.state.endDate,onChange:function(t){return e.handleDateChange("endDate",t.target.value)},style:{padding:"6px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"10px",fontSize:"14px",marginBottom:"0.5rem"}}),(0,m.jsx)("label",{htmlFor:"searchTask",style:{marginLeft:"rem"},children:(0,m.jsx)("span",{role:"img","aria-label":"search-icon"})}),(0,m.jsxs)("select",{value:this.searchQuery,onChange:this.handleSearchChange,style:{marginBottom:"20px",padding:"8px",border:"1px solid",borderRadius:"4px",transition:"border-color 0.3s ease-in-out",backgroundColor:o?"#f0f0f0":"transparent"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,m.jsx)("option",{children:"Search by Plant"}),(0,m.jsx)("option",{value:"AAAPL-27",children:"AAAPL-27"}),(0,m.jsx)("option",{value:"AAAPL-29",children:"AAAPL-29"}),(0,m.jsx)("option",{value:"AAAPL- 89",children:"AAAPL- 89"}),(0,m.jsx)("option",{value:"DPAPL - 236",children:"DPAPL - 236"}),(0,m.jsx)("option",{value:" DPAPL- GN",children:" DPAPL- GN"})]})]}),(0,m.jsxs)("div",{className:"table-container",children:[(0,m.jsxs)(g.iA,{className:"custom-table",children:[(0,m.jsx)(g.hr,{children:(0,m.jsxs)(g.Tr,{children:[(0,m.jsx)(g.Th,{style:{textAlign:"center",height:"40px"},children:"Machine Code"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"BreakDown Start Date"}),(0,m.jsx)(g.Th,{}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Breakdown Type"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Location"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Line Name"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Remark"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Status"}),(0,m.jsx)(g.Th,{style:{textAlign:"center"},children:"Edit"})]})}),(0,m.jsxs)(g.p3,{children:[this.state.message&&(0,m.jsx)(g.Tr,{children:(0,m.jsx)(g.Td,{colSpan:"8",children:this.state.message})}),(this.state.searchQuery?a.filter((function(e){return i.includes(e)})):s.filter((function(e){return i.includes(e)}))).map((function(e){return(0,m.jsxs)(g.Tr,{children:[(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.MachineName}),(0,m.jsxs)(g.Td,{style:{textAlign:"center"},children:[" ",new Date(e.Date).toLocaleDateString()]}),(0,m.jsx)(g.Td,{}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.BreakdownType}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.Location}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.LineName}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.Remark}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:e.Status}),(0,m.jsx)(g.Td,{style:{textAlign:"center"},children:(0,m.jsx)(u.OL,{to:"/pbdStatus/".concat(e._id),style:{color:"#000080"},children:(0,m.jsx)(p.fmQ,{})})})]},e._id)}))]})]}),r&&(0,m.jsxs)("div",{className:"loader-container",children:[(0,m.jsx)(h.LQ,{color:"primary"}),(0,m.jsx)("div",{className:"loader",children:"Loading..."})]})]})]})})}}]),n}(l.Component);t.default=y},8477:function(){}}]);
//# sourceMappingURL=987.3ec70877.chunk.js.map