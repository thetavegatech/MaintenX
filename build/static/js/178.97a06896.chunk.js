"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[178],{43178:function(e,t,n){n.r(t);var r=n(29439),l=n(72791),s=n(55294),i=n(11087),c=n(78983),a=n(16856),d=n(56355),o=n(80184);t.default=function(){var e=(0,l.useState)([]),t=(0,r.Z)(e,2),n=t[0],h=t[1],x=(0,l.useState)([]),u=(0,r.Z)(x,2),j=u[0],g=u[1],y=(0,l.useState)(""),p=(0,r.Z)(y,2),A=p[0],m=p[1],f=(0,l.useState)(""),S=(0,r.Z)(f,2),_=S[0],v=S[1],b=(0,l.useState)(!0),D=(0,r.Z)(b,2),w=D[0],k=D[1],C=(0,l.useState)(null),L=(0,r.Z)(C,2),N=L[0];L[1];(0,l.useEffect)((function(){s.Z.get("http://localhost:4000/api/pm").then((function(e){var t=Array.isArray(e.data)?e.data:[e.data];h(t),g(t),k(!1)})).catch((function(e){console.error("Error fetching data:",e),alert("Error fetching data"),k(!1)}))}),[]);return(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)(i.OL,{to:"/pmForm",children:(0,o.jsx)(c.u5,{color:"info",className:"mb-2",style:{marginTop:"5px"},children:"Add New"})}),(0,o.jsx)("label",{htmlFor:"searchTask",style:{marginLeft:"70%"},children:(0,o.jsx)("span",{role:"img","aria-label":"search-icon"})}),(0,o.jsx)("input",{placeholder:"Search by Asset/Location",style:{marginBottom:"10px",padding:"8px",border:"1px solid ",borderRadius:"4px",transition:"border-color 0.3s ease-in-out, background-color 0.3s ease-in-out"},value:A,onChange:function(e){var t=e.target.value.toLowerCase(),r=n.filter((function(e){var n=(e.location||"").toLowerCase(),r=(e.assetName||"").toLowerCase();return n.includes(t)||r.includes(t)}));g(r),m(t)}}),(0,o.jsxs)(c.Sx,{bordered:!0,striped:!0,hover:!0,responsive:!0,children:[(0,o.jsx)(c.V,{color:"dark",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{textAlign:"center"},children:"Sr No"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Asset Name"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Asset Type"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Location"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"PM Task Name"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"PM Schedule Date"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Next Schedule Date"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Description"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"PM Details"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Status"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"QR Code"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Edit"}),(0,o.jsx)("th",{style:{textAlign:"center"},children:"Delete"})]})}),(0,o.jsx)("tbody",{children:w?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"13",style:{textAlign:"center"},children:(0,o.jsx)("p",{children:"Loading..."})})}):(0,o.jsxs)(o.Fragment,{children:[_&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"13",style:{textAlign:"center",fontStyle:"italic",color:"red"},children:_})}),j.map((function(e,t){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{style:{textAlign:"center"},children:t+1}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.assetName}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.assetType}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.location}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.pmTaskName}),(0,o.jsx)("td",{style:{textAlign:"center"},children:new Date(e.pmScheduleDate).toLocaleDateString()}),(0,o.jsx)("td",{style:{textAlign:"center"},children:new Date(e.nextScheduleDate).toLocaleDateString()}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.description}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.pmDetails}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.status}),(0,o.jsx)("td",{style:{textAlign:"center"},children:e.qrCode&&(0,o.jsx)("img",{src:e.qrCode,alt:"QR Code",width:50,height:50})}),(0,o.jsx)("td",{style:{textAlign:"center"},children:(0,o.jsx)(i.OL,{to:"/editpm/".concat(e._id),style:{color:"#000080"},children:(0,o.jsx)(d.fmQ,{})})}),(0,o.jsx)("td",{style:{textAlign:"center"},children:(0,o.jsx)("button",{className:"btn",onClick:function(){return t=e._id,void(window.confirm("Are you sure you want to delete this data?")&&s.Z.delete("http://localhost:4000/api/pm/".concat(t)).then((function(e){var r=n.filter((function(e){return e._id!==t}));h(r),g(r),v("Data successfully deleted!"),setTimeout((function(){v("")}),2e3)})).catch((function(e){console.error("Error deleting data:",e),v("Error deleting data. Please try again."),setTimeout((function(){v("")}),2e3)})));var t},style:{color:"red"},children:(0,o.jsx)(a.ZkW,{})})})]},e._id)}))]})})]}),(0,o.jsx)("div",{children:N&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{children:"Scanned Data:"}),(0,o.jsx)("p",{children:N})]})})]})}}}]);
//# sourceMappingURL=178.97a06896.chunk.js.map