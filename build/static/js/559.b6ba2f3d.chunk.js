"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[559],{61179:function(e,t,n){n.r(t);var a=n(4942),r=n(1413),s=n(74165),c=n(15861),o=n(29439),i=n(72791),l=n(55294),u=n(39040),d=n(90020),m=n(1104),p=n(57689),h=n(80184);t.default=function(){var e=(0,i.useState)({assetName:"",location:"",assetType:"",installationDate:"",tbmScheduleDate:"",tbmFrequency:"",nextTbmDate:"",status:""}),t=(0,o.Z)(e,2),n=t[0],f=t[1],x=(0,p.UO)().id,b=(0,p.s0)(),v=(0,i.useState)(""),g=(0,o.Z)(v,2),y=g[0],Z=g[1];(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("https://backendmaintenx.onrender.com/api/tbm/".concat(x));case 3:t=e.sent,n=t.data,f({assetName:n.assetName,location:n.location,assetType:n.assetType,installationDate:n.installationDate,tbmScheduleDate:n.tbmScheduleDate?n.tbmScheduleDate.split("T")[0]:"",tbmFrequency:n.tbmFrequency,nextTbmDate:n.nextTbmDate?n.nextTbmDate.split("T")[0]:"",status:n.status}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),Z("Error fetching data. Please try again.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[x]);var j=function(e,t){if(!e||!t)return"";var n=new Date(e);switch(t){case"daily":return(0,u.Z)(n,1).toISOString().split("T")[0];case"weekly":return(0,d.Z)(n,1).toISOString().split("T")[0];case"fifteen days":return(0,u.Z)(n,15).toISOString().split("T")[0];case"monthly":return(0,m.Z)(n,1).toISOString().split("T")[0];case"quarterly":return(0,m.Z)(n,3).toISOString().split("T")[0];case"half year":return(0,m.Z)(n,6).toISOString().split("T")[0];case"yearly":return(0,m.Z)(n,12).toISOString().split("T")[0];default:return""}},N=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var c,o,i,u,d,m,p,h,x;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.target,o=c.name,i=c.value,u=(0,r.Z)((0,r.Z)({},n),{},(0,a.Z)({},o,i)),"assetName"!==o){e.next=13;break}return e.prev=3,e.next=6,l.Z.get("https://backendmaintenx.onrender.com/api/locations/".concat(i));case 6:(d=e.sent).data&&d.data.Location&&(u=(0,r.Z)((0,r.Z)({},u),{},{location:d.data.Location})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Error fetching location:",e.t0);case 13:"cbmScheduleDate"!==o&&"cbmFrequency"!==o||(p=(m=u).cbmScheduleDate,h=m.cbmFrequency,x=j(p,h),u=(0,r.Z)((0,r.Z)({},u),{},{nextCbmDate:x})),f(u);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,l.Z.put("https://backendmaintenx.onrender.com/api/tbm/".concat(x),n);case 4:b(-1),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error updating CBM record:",e.t0),Z("Error updating CBM record. Please try again.");case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"container",style:{border:"1px solid #ccc",padding:"5px",backgroundColor:"",borderRadius:"10px",boxShadow:"2px 4px 4px rgba(0, 0, 0, 0.1)",height:"50%",width:"100%"},children:[(0,h.jsx)("h4",{children:"Edit TBM Record"}),(0,h.jsxs)("form",{onSubmit:D,children:[(0,h.jsxs)("div",{className:"row g-3",children:[(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{children:"Asset Name:"}),(0,h.jsx)("input",{name:"assetName",className:"form-control col-sm-6",value:n.assetName,onChange:N,required:!0})]}),(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{children:"Location:"}),(0,h.jsx)("input",{type:"text",name:"location",className:"form-control col-sm-4",value:n.location,onChange:N,readOnly:!0,required:!0})]}),(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{children:"TBM Schedule Date:"}),(0,h.jsx)("input",{type:"date",name:"tbmScheduleDate",className:"form-control col-sm-6",value:n.tbmScheduleDate,onChange:N})]}),(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{children:"TBM Frequency:"}),(0,h.jsxs)("select",{type:"text",name:"tbmFrequency",className:"form-control col-sm-6",value:n.tbmFrequency,onChange:N,children:[(0,h.jsx)("option",{value:"daily",children:"Daily"}),(0,h.jsx)("option",{value:"weekly",children:"Weekly"}),(0,h.jsx)("option",{value:"fifteen days",children:"Fifteen Days"}),(0,h.jsx)("option",{value:"monthly",children:"Monthly"}),(0,h.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,h.jsx)("option",{value:"half year",children:"Half Year"}),(0,h.jsx)("option",{value:"yearly",children:"Yearly"})]})]}),(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{children:"Next TBM Date:"}),(0,h.jsx)("input",{type:"date",name:"nextTbmDate",className:"form-control col-sm-6",value:n.nextTbmDate,onChange:N})]}),(0,h.jsxs)("div",{className:"col-md-4",children:[(0,h.jsx)("label",{htmlFor:"status",children:"Status"}),(0,h.jsxs)("select",{className:"form-control col-sm-6",required:!0,id:"status",name:"status",value:n.status,onChange:N,children:[(0,h.jsx)("option",{value:"Pending",children:"Pending"}),(0,h.jsx)("option",{value:"Completed",children:"Completed"})]})]})]}),(0,h.jsx)("button",{type:"submit",children:"Submit"})]}),y&&(0,h.jsx)("p",{children:y})]})}},4522:function(e,t,n){function a(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return a}})},29297:function(e,t,n){function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:function(){return a}})},39040:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(29297),r=n(38527),s=n(4522);function c(e,t){(0,s.Z)(2,arguments);var n=(0,r.Z)(e),c=(0,a.Z)(t);return isNaN(c)?new Date(NaN):c?(n.setDate(n.getDate()+c),n):n}},1104:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(29297),r=n(38527),s=n(4522);function c(e,t){(0,s.Z)(2,arguments);var n=(0,r.Z)(e),c=(0,a.Z)(t);if(isNaN(c))return new Date(NaN);if(!c)return n;var o=n.getDate(),i=new Date(n.getTime());return i.setMonth(n.getMonth()+c+1,0),o>=i.getDate()?i:(n.setFullYear(i.getFullYear(),i.getMonth(),o),n)}},90020:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(29297),r=n(39040),s=n(4522);function c(e,t){(0,s.Z)(2,arguments);var n=7*(0,a.Z)(t);return(0,r.Z)(e,n)}},38527:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(71002),r=n(4522);function s(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,a.Z)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}}}]);
//# sourceMappingURL=559.b6ba2f3d.chunk.js.map