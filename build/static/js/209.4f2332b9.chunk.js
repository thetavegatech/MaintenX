"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[209],{9040:function(e,t,n){n.r(t);var a=n(15671),r=n(43144),i=n(60136),s=n(27277),l=n(72791),c=n(55294),o=n(11087),d=n(56355),h=n(78983),x=n(61604),u=n(34045),m=n(18513),p=(n(8477),n(18512)),f=(n(66338),n(80184)),g=function(e){(0,i.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={breakdowns:[],selectedMachine:"",mttr:"",selectedLocation:"",searchLocation:"",message:"",searchQuery:"",isHovered:!1,loading:!0},e.handleMouseEnter=function(){e.setState({isHovered:!0})},e.handleMouseLeave=function(){e.setState({isHovered:!1})},e.handleSearchChange=function(t){var n=t.target.value.toLowerCase(),a=e.state.breakdowns.filter((function(e){return(e.Location||"").toLowerCase().includes(n)}));e.setState({filteredAssets:a,searchQuery:n})},e.handleLocationChange=function(t){e.setState({selectedLocation:t.target.value})},e.calculateMTTR=function(){var t=e.state,n=t.breakdowns,a=t.selectedMachine;if(a){var r=n.filter((function(e){return e.MachineName===a}));if(0!==r.length){var i=0;r.forEach((function(e){var t=new Date(e.BreakdownStartDate),n=new Date(e.BreakdownEndDate);i+=n-t}));var s=i/36e5/r.length;e.setState({mttr:s})}else e.setState({mttr:"No breakdowns found for selected machine."})}else e.setState({mttr:"Please select a machine."})},e.calculateMTBF=function(){var t=e.state,n=t.breakdowns,a=t.selectedMachine;if(a){var r=n.filter((function(e){return e.MachineName===a}));if(0!==r.length){var i=7488e5/(1e3*r.length*3600);e.setState({mtbf:i})}else e.setState({mtbf:"No breakdowns found for selected machine."})}else e.setState({mtbf:"Please select a machine."})},e.exportToExcel=function(){var t=e.state.breakdowns.map((function(e){return{Date:(0,x.Z)(new Date(e.BreakdownStartDate),"HH:mm:ss dd-MM-yyyy"),MachineName:e.MachineName,BreakdownStartDate:e.BreakdownStartDate,BreakdownType:e.BreakdownType,BreakdownEndDate:e.BreakdownEndDate,Shift:e.Shift,Operations:e.Operations,BreakdownPhenomenons:e.BreakdownPhenomenons,WhyWhyAnalysis:e.WhyWhyAnalysis,OCC:e.OCC,RootCause:e.RootCause,PreventiveAction:e.PreventiveAction,CorrectiveAction:e.CorrectiveAction,TargetDate:e.TargetDate,Responsibility:e.Responsibility,HD:e.HD,Status:e.Status,SpareParts:e.SpareParts,Cost:e.Cost,Location:e.Location,LineName:e.LineName,Remark:e.Remark}})),n=u.P6.json_to_sheet(t),a=u.P6.book_new();u.P6.book_append_sheet(a,n,"ReportData"),u.NC(a,"reportdata.xlsx")},e}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state.selectedLocation,n=t?"https://backendmaintenx.onrender.com/api/breakdown?location=".concat(t):"https://backendmaintenx.onrender.com/api/breakdown";c.Z.get(n).then((function(t){e.setState({breakdowns:Array.isArray(t.data)?t.data:[t.data],loading:!1})})).catch((function(t){console.error("Error fetching data:",t),alert("Error fetching data"),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.breakdowns,a=t.selectedMachine,r=t.mtbf,i=t.mttr,s=t.filteredAssets,l=(t.searchLocation,t.searchQuery,t.loading),c=n.filter((function(e){return"close"===e.Status})),x=n.filter((function(e){return e.Location&&""!==e.Location.trim()})),u=this.state.isHovered;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"container",style:{marginTop:"0px"},children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{htmlFor:"searchTask",style:{marginLeft:"0%"},children:(0,f.jsx)("span",{role:"img","aria-label":"search-icon"})}),(0,f.jsxs)("select",{value:this.searchQuery,onChange:this.handleSearchChange,style:{marginBottom:"0px",padding:"8px",border:"1px solid",borderRadius:"4px",transition:"border-color 0.3s ease-in-out",backgroundColor:u?"#f0f0f0":"transparent"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,f.jsx)("option",{children:"Search by Plant"}),(0,f.jsx)("option",{value:"Plant 1",children:"Plant 1"}),(0,f.jsx)("option",{value:"Plant 2",children:"Plant 2"}),(0,f.jsx)("option",{value:"Plant 3",children:"Plant 3"})]}),(0,f.jsx)(h.u5,{color:"info",type:"button",style:{margin:"1rem"},onClick:this.exportToExcel,children:"Export to Excel"})]}),(0,f.jsx)("div",{className:"table-container",children:(0,f.jsxs)(p.iA,{className:"custom-table",children:[(0,f.jsx)(p.hr,{children:(0,f.jsxs)(p.Tr,{children:[(0,f.jsx)(p.Th,{style:{textAlign:"center",height:"40px"},children:"Machine Name"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"BreakDown Start Date"}),(0,f.jsx)(p.Td,{}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"Shift"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"Line Name"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"Location"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"End Date"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"Status"}),(0,f.jsx)(p.Th,{style:{textAlign:"center"},children:"Edit"})]})}),(0,f.jsx)(p.p3,{children:l?(0,f.jsx)("tr",{children:(0,f.jsxs)("td",{colSpan:"8",style:{textAlign:"center"},children:[(0,f.jsx)("img",{src:m,alt:"Loading..."}),(0,f.jsx)("p",{children:"Loading..."})]})}):(0,f.jsxs)(f.Fragment,{children:[this.state.message&&(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:"11",style:{textAlign:"center"},children:this.state.message})}),(this.state.searchQuery?s.filter((function(e){return c.includes(e)})):x.filter((function(e){return c.includes(e)}))).map((function(e){return(0,f.jsxs)(p.Tr,{children:[(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:e.MachineName}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:new Date(e.BreakdownStartDate).toLocaleDateString()}),(0,f.jsx)(p.Td,{}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:e.Shift}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:e.LineName}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:e.Location}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:new Date(e.BreakdownEndDate).toLocaleDateString()}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:e.Status}),(0,f.jsx)(p.Td,{style:{textAlign:"center"},children:(0,f.jsx)(o.OL,{to:"/pbdStatus/".concat(e._id),style:{color:"#000080"},children:(0,f.jsx)(d.fmQ,{})})})]},e._id)}))]})})]})}),(0,f.jsx)("div",{className:"container",style:{marginTop:"20px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"10px"},children:(0,f.jsxs)("div",{className:"row g-2",children:[(0,f.jsxs)("div",{className:"col-md-6",style:{marginBottom:"10px"},children:[(0,f.jsx)("label",{children:"Select Machine: "}),(0,f.jsxs)("select",{onChange:function(t){e.setState({selectedMachine:t.target.value},e.calculateMTBF)},value:a,style:{marginLeft:"10px",padding:"5px"},children:[(0,f.jsx)("option",{value:"",children:"Select Machine"}),Array.from(new Set(n.map((function(e){return e.MachineName})))).map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))]}),(0,f.jsx)(h.u5,{color:"info",onClick:this.calculateMTBF,className:"mb-2",marginLeft:"20px",padding:"8px",style:{marginTop:"5px",marginLeft:"10px"},children:"Calculate MTBF"})]}),(0,f.jsxs)("div",{className:"col-md-6",style:{marginBottom:"10px"},children:[(0,f.jsx)("label",{style:{marginLeft:""},children:"MTBF (hours): "}),(0,f.jsx)("input",{type:"text",value:r,readOnly:!0,style:{marginLeft:"10px",padding:"5px"}})]}),(0,f.jsxs)("div",{className:"col-md-6",style:{marginBottom:"10px"},children:[(0,f.jsx)("label",{children:"Select Machine: "}),(0,f.jsxs)("select",{onChange:function(t){e.setState({selectedMachine:t.target.value},e.calculateMTTR)},value:a,style:{marginLeft:"10px",padding:"5px"},children:[(0,f.jsx)("option",{value:"",children:"Select Machine"}),Array.from(new Set(n.map((function(e){return e.MachineName})))).map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))]}),(0,f.jsx)(h.u5,{color:"info",onClick:this.calculateMTBF,className:"mb-2",marginLeft:"20px",padding:"8px",style:{marginTop:"5px",marginLeft:"10px"},children:"Calculate MTTR"})]}),(0,f.jsxs)("div",{className:"col-md-6",style:{marginBottom:"10px"},children:[(0,f.jsx)("label",{style:{marginLeft:""},children:"MTTR (hours): "}),(0,f.jsx)("input",{type:"text",value:i,readOnly:!0,style:{marginLeft:"10px",padding:"5px"}})]})]})})]})})}}]),n}(l.Component);t.default=g},8477:function(){},18513:function(e,t,n){e.exports=n.p+"static/media/loader.0b2c6b0bc99fc6df75e4.gif"}}]);
//# sourceMappingURL=209.4f2332b9.chunk.js.map